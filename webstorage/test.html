<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Web Storage</title>
</head>
<body>
  <h1>Web Storage Test</h1>

  <p id="name"></p>
  <p id="email"></p>

  <script>
  if(lsCheck()){

    // var s = sessionStorage;
    var s = localStorage;

    // セット
    s.setItem('name', 'taisuke');
    s.setItem('email', 'taisuke@example.com');

    console.log('name saved!');

    // 確認
    for (var i = 0; i < s.length; i++) {
      console.log(s.key(i) + ': ' + s.getItem(s.key(i)));
      // pに吐き出し
      if (s.key(i) == 'name') {
        document.getElementById('name').textContent = s.getItem(s.key(i));
      } else if (s.key(i) == 'email') {
        document.getElementById('email').textContent = s.getItem(s.key(i));
      }

    }

    // JSONで保存
    var user = {
      name: 'oda',
      email: 'oda@example.com'
    }
    s.setItem('user', JSON.stringify(user));
    // console.log(JSON.parse(s.getItem('user')));
    console.dir(JSON.parse(s.getItem('user')));

    // 削除
    // s.removeItem('name');
    s.clear();

    // console.log(s.getItem('name'));
  }

  function lsCheck(){
    try{
      if(typeof localStorage == 'undefined'){
        return false;
      }else if(window.localStorage){
        //detect IE10 and private mode
      }
    }catch(e){
      return false;
    }
    return true;
  }
  </script>
</body>
</html>
